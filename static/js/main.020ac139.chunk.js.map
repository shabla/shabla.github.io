{"version":3,"sources":["modules/auth/components/AccessControl/AccessControl.tsx","modules/auth/components/LoginPage/LoginPage.tsx","modules/shared/utils/index.ts","modules/auth/stores/sessionStore.tsx","modules/auth/index.tsx","modules/home/components/DigitalClock/DigitalClock.tsx","modules/home/components/HomePage/HomePage.tsx","modules/home/index.tsx","modules/profile/components/ProfilePage/ProfilePage.tsx","modules/profile/index.tsx","modules/dialog-system/assets.ts","modules/dialog-system/components/CornerHighlights/CornerHighlights.tsx","modules/dialog-system/components/DialogWindow/DialogWindow.tsx","modules/dialog-system/components/DialogViewerPage/DialogViewerPage.tsx","modules/dialog-system/index.tsx","modules/shared/components/App/App.tsx","modules/shared/components/Navbar/Navbar.tsx","modules/shared/components/PageTitle/PageTitle.tsx","index.tsx","assets/images/grass.png","assets/images/portrait.jpg","assets/images/char.webp"],"names":["AccessLevel","LoginPage","console","log","title","xs","center","elevation","Elevation","THREE","style","marginTop","marginBottom","fill","placeholder","large","end","onClick","a","async","SessionStore","login","username","AccessControl","observer","redirectTo","accessLevel","children","isLoading","NotLoggedIn","isLoggedIn","to","LoggedIn","window","location","pathname","sleep","duration","Promise","resolve","setTimeout","session","this","setSession","observable","action","computed","routes","key","path","numbers","0","1","2","3","4","5","6","7","8","9","EMPTY_NUMBER","DigitalNumber","number","useState","pixels","setPixels","useEffect","className","map","row","rowIndex","col","colIndex","DigitalClock","setNumbers","updateClock","now","Date","hours","getHours","toString","padStart","split","nbStr","parseInt","minutes","getMinutes","seconds","getSeconds","interval","setInterval","clearInterval","nb","nbIndex","HomePage","margin","TWO","exact","ProfilePage","assets","charactersData","grassImage","portraitImage","characterImage","getAsset","id","theme","CornerHighlights","styled","div","props","side","level","only","imageSize","imageFrameSize","nameHeight","Conversation","animated","Interlocutor","InterlocutorImageFrame","InterlocutorImage","img","InterlocutorNameTag","InterlocutorText","ConversationChoices","ConversationChoice","NextStepIcon","Icon","attrs","icon","iconSize","DialogWindow","target","onComplete","dialogs","initialDialog","currentDialog","setCurrentDialog","currentStep","setCurrentStep","options","setOptions","showNextIcon","setShowNextIcon","interlocutorAnimation","useSpring","opacity","transform","from","conversationAnimation","nextStepIconAnimation","choiceAnimation","useTrail","length","steps","waitingForOption","nextStep","getNextStep","then","dialog","currentStepIndex","indexOf","moveForward","React","useCallback","handleKeyPress","e","addEventListener","removeEventListener","index","option","next","text","src","alt","name","avgTypingDelay","stdTypingDelay","startDelay","cursor","show","visibleCharacters","Page","Background","focused","CharacterEntity","active","AnimatedBlackBar","pos","QuestIcon","DialogViewerPage","setTarget","blackBarProps","height","character","position","worldImage","App","restoreSession","authRoutes","homeRoutes","profileRoutes","dialogSystemRoutes","Navbar","history","useHistory","fixedToTop","align","minimal","push","rightIcon","logout","PageTitle","document","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.020ac139.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { Spinner } from \"@blueprintjs/core\";\r\n\r\nimport { SessionStore } from \"../..\";\r\n\r\nexport enum AccessLevel {\r\n    NotLoggedIn,\r\n    LoggedIn\r\n}\r\n\r\ntype AccessControlProps = {\r\n    redirectTo?: string | undefined;\r\n    accessLevel?: AccessLevel | undefined;\r\n    children?: React.ReactNode[] | React.ReactNode;\r\n};\r\n\r\nexport const AccessControl: React.FC<AccessControlProps> = observer(\r\n    ({ redirectTo = \"/\", accessLevel, children }) => {\r\n        if (SessionStore.isLoading) {\r\n            return <Spinner />;\r\n        }\r\n\r\n        if (accessLevel === AccessLevel.NotLoggedIn && SessionStore.isLoggedIn) {\r\n            console.log(`is logged, trying to go to NotLoggedIn, redirect`);\r\n            return <Redirect to={redirectTo} />;\r\n        }\r\n\r\n        if (accessLevel === AccessLevel.LoggedIn && !SessionStore.isLoggedIn) {\r\n            console.log(`not logged, trying to go to LoggedIn, keep target and redirect to login`);\r\n            return <Redirect to={`${redirectTo}?r=${window.location.pathname}`} />;\r\n        }\r\n\r\n        console.log(\"render children\");\r\n        return <>{children}</>;\r\n    }\r\n);\r\n\r\nexport default AccessControl;\r\n","import React from \"react\";\r\nimport { InputGroup, Card, Elevation, Button } from \"@blueprintjs/core\";\r\nimport { Grid, Row, Col } from \"react-flexbox-grid\";\r\n\r\nimport { PageTitle } from \"modules/shared\";\r\nimport { SessionStore } from \"modules/auth\";\r\n\r\nconst LoginPage: React.FC = () => {\r\n    console.log(\"login page!\");\r\n\r\n    const onLogin = async () => {\r\n        await SessionStore.login({ username: \"foo\" });\r\n        console.log(\"cool\");\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <PageTitle title=\"Login\" />\r\n            <Grid>\r\n                <Col xs={12}>\r\n                    <Row center=\"xs\">\r\n                        <Col xs={6}>\r\n                            <Card elevation={Elevation.THREE}>\r\n                                <Row style={{ marginTop: 10, marginBottom: 10 }}>\r\n                                    <InputGroup fill placeholder=\"Username\" large />\r\n                                </Row>\r\n\r\n                                <Row style={{ marginTop: 10, marginBottom: 10 }}>\r\n                                    <InputGroup fill placeholder=\"Password\" large />\r\n                                </Row>\r\n\r\n                                <Row end=\"xs\">\r\n                                    <Button onClick={onLogin} large>\r\n                                        Login\r\n                                    </Button>\r\n                                </Row>\r\n                            </Card>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n","export const sleep = async (duration: number) => new Promise((resolve) => setTimeout(resolve, duration));","import { observable, action, computed } from \"mobx\";\r\nimport { sleep } from \"modules/shared/utils\";\r\n\r\nclass SessionStore {\r\n    @observable isLoading: boolean = true;\r\n    @observable session: {} | null = null;\r\n\r\n    @action setSession(session: {} | null) {\r\n        console.log(\"setting session to \", session);\r\n        this.session = session;\r\n    }\r\n\r\n    @action async restoreSession() {\r\n        this.isLoading = true;\r\n\r\n        await sleep(200);\r\n\r\n        this.session = { username: \"Bob\" };\r\n        this.isLoading = false;\r\n    }\r\n\r\n    @action async login(session: {}) {\r\n        console.log(\"logging in\");\r\n        this.isLoading = true;\r\n\r\n        await sleep(200);\r\n\r\n        this.setSession(session);\r\n        this.isLoading = false;\r\n    }\r\n\r\n    @action logout() {\r\n        console.log(\"logging out\");\r\n        this.session = null;\r\n    }\r\n\r\n    @computed get isLoggedIn() {\r\n        return this.session !== null;\r\n    }\r\n}\r\n\r\nexport default new SessionStore();\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nimport LoginPage from \"./components/LoginPage/LoginPage\";\r\nimport AccessControl, { AccessLevel } from \"./components/AccessControl/AccessControl\";\r\n\r\nexport { AccessControl, AccessLevel };\r\nexport { default as SessionStore } from \"./stores/sessionStore\";\r\n\r\nexport const routes = [\r\n    <Route key=\"login-page\" path=\"/login\">\r\n        <AccessControl accessLevel={AccessLevel.NotLoggedIn} redirectTo=\"/\">\r\n            <LoginPage />\r\n        </AccessControl>\r\n    </Route>\r\n];","import React, { useState, useEffect } from \"react\";\r\n\r\nimport \"./DigitalClock.scss\";\r\n\r\nconst numbers: Record<number, number[][]> = {\r\n    0: [\r\n        [1, 1, 1],\r\n        [1, 0, 1],\r\n        [1, 0, 1],\r\n        [1, 0, 1],\r\n        [1, 1, 1],\r\n    ],\r\n    1: [\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n    ],\r\n    2: [\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [1, 1, 1],\r\n        [1, 0, 0],\r\n        [1, 1, 1],\r\n    ],\r\n    3: [\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [1, 1, 1],\r\n    ],\r\n    4: [\r\n        [1, 0, 1],\r\n        [1, 0, 1],\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n    ],\r\n    5: [\r\n        [1, 1, 1],\r\n        [1, 0, 0],\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [1, 1, 1],\r\n    ],\r\n    6: [\r\n        [1, 1, 1],\r\n        [1, 0, 0],\r\n        [1, 1, 1],\r\n        [1, 0, 1],\r\n        [1, 1, 1],\r\n    ],\r\n    7: [\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n    ],\r\n    8: [\r\n        [1, 1, 1],\r\n        [1, 0, 1],\r\n        [1, 1, 1],\r\n        [1, 0, 1],\r\n        [1, 1, 1],\r\n    ],\r\n    9: [\r\n        [1, 1, 1],\r\n        [1, 0, 1],\r\n        [1, 1, 1],\r\n        [0, 0, 1],\r\n        [0, 0, 1],\r\n    ],\r\n};\r\n\r\nconst EMPTY_NUMBER = [\r\n    [0, 0, 0],\r\n    [0, 0, 0],\r\n    [0, 0, 0],\r\n];\r\n\r\nconst DigitalNumber: React.FC<{ number: number }> = ({ number }) => {\r\n    const [pixels, setPixels] = useState<number[][]>(EMPTY_NUMBER);\r\n\r\n    useEffect(() => {\r\n        setPixels(numbers[number] || EMPTY_NUMBER);\r\n    }, [number]);\r\n\r\n    return (\r\n        <div className=\"number\">\r\n            {pixels.map((row, rowIndex) => (\r\n                <div className=\"pixels-row\" key={rowIndex}>\r\n                    {row.map((col, colIndex) => (\r\n                        <div className={\"pixel \" + (col ? \"full\" : \"empty\")} key={colIndex}>\r\n                            &nbsp;\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DigitalClock: React.FC = () => {\r\n    const [numbers, setNumbers] = useState<number[]>([]);\r\n\r\n    useEffect(() => {\r\n        const updateClock = () => {\r\n            const now = new Date();\r\n            const hours = now\r\n                .getHours()\r\n                .toString()\r\n                .padStart(2, \"0\")\r\n                .split(\"\")\r\n                .map((nbStr) => parseInt(nbStr));\r\n            const minutes = now\r\n                .getMinutes()\r\n                .toString()\r\n                .padStart(2, \"0\")\r\n                .split(\"\")\r\n                .map((nbStr) => parseInt(nbStr));\r\n            const seconds = now\r\n                .getSeconds()\r\n                .toString()\r\n                .padStart(2, \"0\")\r\n                .split(\"\")\r\n                .map((nbStr) => parseInt(nbStr));\r\n\r\n            setNumbers([...hours, ...minutes, ...seconds]);\r\n        };\r\n\r\n        updateClock();\r\n\r\n        const interval = setInterval(updateClock, 1000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"digital-clock\">\r\n            {numbers.map((nb, nbIndex) => (\r\n                <DigitalNumber number={nb} key={nbIndex} />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Elevation, H1, Text } from \"@blueprintjs/core\";\r\nimport { Grid, Col } from \"react-flexbox-grid\";\r\n\r\nimport { Navbar, PageTitle } from \"modules/shared\";\r\nimport { DigitalClock } from \"../DigitalClock/DigitalClock\";\r\n\r\nconst HomePage: React.FC = () => {\r\n    console.log(\"!!HomePage!!\");\r\n    return (\r\n        <>\r\n            <PageTitle title=\"Home Page\" />\r\n            <Navbar />\r\n\r\n            <Grid>\r\n                <Col style={{ margin: 10 }}>\r\n                    <Card elevation={Elevation.TWO}>\r\n                        <H1>Hello World</H1>\r\n                        <Text>\r\n                            Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque ea adipisci enim\r\n                            perferendis esse architecto voluptatem totam distinctio veritatis itaque porro\r\n                            eveniet, at, similique velit molestias possimus autem assumenda animi?\r\n                        </Text>\r\n                    </Card>\r\n                </Col>\r\n\r\n                <Col style={{ margin: 10 }}>\r\n                    <Card elevation={Elevation.TWO}>\r\n                        <DigitalClock />\r\n                        <Link to=\"/profile\">Go to profile</Link>\r\n                    </Card>\r\n                </Col>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nimport { AccessControl, AccessLevel } from \"modules/auth\";\r\nimport HomePage from \"./components/HomePage/HomePage\";\r\n\r\nexport const routes = [\r\n    <Route key=\"home-page\" exact path=\"/\">\r\n        <AccessControl accessLevel={AccessLevel.LoggedIn} redirectTo=\"/login\">\r\n            <HomePage />\r\n        </AccessControl>\r\n    </Route>\r\n];\r\n","import React from \"react\";\r\n\r\nimport { Navbar, PageTitle } from \"modules/shared\";\r\n\r\nconst ProfilePage: React.FC = () => {\r\n    console.log(\"ProfilePage!!\");\r\n    return (\r\n        <div>\r\n            <PageTitle title=\"Profile\" />\r\n            <Navbar />\r\n            profile page\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfilePage;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nimport { AccessControl, AccessLevel } from \"modules/auth\";\r\nimport ProfilePage from \"./components/ProfilePage/ProfilePage\";\r\n\r\nconst routes = [\r\n    <Route key=\"profile-page\" exact path=\"/profile\">\r\n        <AccessControl accessLevel={AccessLevel.LoggedIn} redirectTo=\"/login\">\r\n            <ProfilePage />\r\n        </AccessControl>\r\n    </Route>\r\n];\r\n\r\nexport { routes };\r\n","import charactersData from \"assets/characters.json\";\r\nimport grassImage from \"assets/images/grass.png\";\r\nimport portraitImage from \"assets/images/portrait.jpg\";\r\nimport characterImage from \"assets/images/char.webp\";\r\n\r\nconst assets: Record<string, any> = {\r\n    \"characters.json\": charactersData,\r\n    \"images/grass.png\": grassImage,\r\n    \"images/portrait.jpg\": portraitImage,\r\n    \"images/char.webp\": characterImage,\r\n};\r\n\r\nexport const getAsset = (id: string): any => {\r\n    return assets[id];\r\n};\r\n","import styled from \"styled-components\";\r\n\r\ntype CornerHighlightsProps = {\r\n    side: \"left\" | \"right\";\r\n    level: \"top\" | \"bottom\";\r\n    only?: \"vertical\" | \"horizontal\";\r\n};\r\n\r\nconst theme = {\r\n    highlightColor: \"#ffffffab\",\r\n    highlightSize: \"50px\",\r\n};\r\n\r\nexport const CornerHighlights = styled.div`\r\n    width: ${theme.highlightSize};\r\n    height: ${theme.highlightSize};\r\n    position: absolute;\r\n    ${(props: CornerHighlightsProps) => `${props.side}: 0;`}\r\n    ${(props: CornerHighlightsProps) => `${props.level}: 0;`}\r\n\r\n    /* Horizontal Highlight */\r\n    :before {\r\n        content: \"\";\r\n        height: 1px;\r\n        width: ${theme.highlightSize};\r\n        position: absolute;\r\n        \r\n        ${(props: CornerHighlightsProps) => `${props.level}: 0;`}\r\n        ${(props: CornerHighlightsProps) =>\r\n            !props.only || props.only === \"horizontal\"\r\n                ? `background: linear-gradient(to ${props.side}, transparent, ${theme.highlightColor});`\r\n                : \"\"}\r\n    }\r\n\r\n    /* Vertical Highlight */\r\n    :after {\r\n        content: \"\";\r\n        height: ${theme.highlightSize};\r\n        width: 1px;\r\n        position: absolute;\r\n        ${(props: CornerHighlightsProps) => `${props.side}: 0;`}\r\n        ${(props: CornerHighlightsProps) =>\r\n            !props.only || props.only === \"vertical\"\r\n                ? `background: linear-gradient(to ${props.level}, transparent, ${theme.highlightColor});`\r\n                : \"\"}\r\n    }\r\n`;\r\n\r\nexport default CornerHighlights;","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Typist from \"react-typist\";\r\nimport { useSpring, useTrail, animated } from \"react-spring\";\r\nimport { Icon } from \"@blueprintjs/core\";\r\n\r\nimport { getAsset } from \"../../assets\";\r\nimport { Character, Dialog, DialogStep, DialogOption } from \"../../models/Dialog\";\r\nimport { sleep } from \"modules/shared/utils\";\r\nimport { CornerHighlights } from \"../CornerHighlights/CornerHighlights\";\r\n\r\nconst theme = {\r\n    interlocutor: {\r\n        imageSize: 120,\r\n        imageFrameSize: 8,\r\n        nameHeight: 30,\r\n    },\r\n    borderRadius: 4,\r\n};\r\nconst Conversation = styled(animated.div)`\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    bottom: 20px;\r\n    left: 15px;\r\n    right: 15px;\r\n    z-index: 10;\r\n    transition: opacity 0.8s ease-out;\r\n    width: 600px;\r\n`;\r\n\r\nconst Interlocutor = styled(animated.div)`\r\n    display: flex;\r\n    flex-direction: row;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst InterlocutorImageFrame = styled.div`\r\n    width: ${theme.interlocutor.imageSize + 2 * theme.interlocutor.imageFrameSize}px;\r\n    height: ${theme.interlocutor.imageSize +\r\n    2 * theme.interlocutor.imageFrameSize +\r\n    theme.interlocutor.nameHeight}px;\r\n    padding: ${theme.interlocutor.imageFrameSize}px;\r\n    border-radius: ${theme.borderRadius}px;\r\n    flex: 0 0 ${theme.interlocutor.imageSize + 2 * theme.interlocutor.imageFrameSize}px;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    box-shadow: 0 0 6px 3px inset rgba(0, 0, 0, 0.5);\r\n    position: relative;\r\n    z-index: 10;\r\n`;\r\n\r\nconst InterlocutorImage = styled.img`\r\n    height: ${theme.interlocutor.imageSize}px;\r\n    width: ${theme.interlocutor.imageSize}px;\r\n    box-shadow: 0 0 5px black;\r\n    display: block;\r\n`;\r\n\r\nconst InterlocutorNameTag = styled.div`\r\n    color: #f1ab54;\r\n    font-size: 16px;\r\n    text-align: center;\r\n    line-height: ${theme.interlocutor.nameHeight}px;\r\n`;\r\n\r\nconst InterlocutorText = styled.div`\r\n    padding: 10px 18px;\r\n    font-size: 22px;\r\n    line-height: 30px;\r\n    border-left: 0;\r\n    border-top-right-radius: ${theme.borderRadius}px;\r\n    border-bottom-right-radius: ${theme.borderRadius}px;\r\n    flex: 1 0 400px; /* this is black magic */\r\n    color: #eee;\r\n    text-shadow: 1px 1px black, 2px 2px #222;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    box-shadow: 0 0 30px 2px inset rgba(0, 0, 0, 0.5);\r\n    position: relative;\r\n`;\r\n\r\nconst ConversationChoices = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n\r\nconst ConversationChoice = styled(animated.div)`\r\n    color: #fff;\r\n    margin-left: ${theme.interlocutor.imageSize + 2 * theme.interlocutor.imageFrameSize}px;\r\n    font-size: 14px;\r\n    padding: 6px 14px;\r\n    text-shadow: 1px 1px black, 2px 2px #222;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    box-shadow: 0 0 15px 2px inset rgba(0, 0, 0, 0.5);\r\n    border: 1px solid black;\r\n    border-bottom-width: 0;\r\n\r\n    &:last-of-type {\r\n        border-bottom-width: 1px;\r\n    }\r\n\r\n    :hover {\r\n        background: darkgoldenrod;\r\n        cursor: pointer;\r\n    }\r\n`;\r\n\r\nconst NextStepIcon = styled(animated(Icon)).attrs({\r\n    icon: \"caret-down\",\r\n    iconSize: 20,\r\n})`\r\n    color: white;\r\n    position: absolute;\r\n    bottom: 10px;\r\n    right: 10px;\r\n`;\r\n\r\ntype DialogWindowProps = {\r\n    target: Character;\r\n    onComplete: (target: Character) => void;\r\n};\r\n\r\nexport const DialogWindow: React.FC<DialogWindowProps> = ({ target, onComplete }) => {\r\n    const [currentDialog, setCurrentDialog] = useState<Dialog>(target.dialogs[target.initialDialog]);\r\n    const [currentStep, setCurrentStep] = useState<DialogStep & { key?: number }>();\r\n    const [options, setOptions] = useState<DialogOption[]>([]);\r\n    const [showNextIcon, setShowNextIcon] = useState<boolean>(false);\r\n\r\n    const interlocutorAnimation = useSpring({\r\n        opacity: 1,\r\n        transform: \"translateY(0) scale(1)\",\r\n        from: {\r\n            opacity: 0,\r\n            transform: \"translateY(-20%) scale(0.9)\",\r\n        },\r\n    });\r\n\r\n    const conversationAnimation = useSpring({\r\n        opacity: 1,\r\n        from: { opacity: 0 },\r\n    });\r\n\r\n    const nextStepIconAnimation = useSpring({\r\n        opacity: 1,\r\n        transform: \"scale(1)\",\r\n        from: { opacity: 0, transform: \"scale(0.5)\" },\r\n    });\r\n\r\n    const choiceAnimation = useTrail(options.length, {\r\n        opacity: 1,\r\n        transform: \"translateY(0)\",\r\n        from: { opacity: 0, transform: \"translateY(75%)\" },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (target) {\r\n            console.log(\"Update current dialog to initial dialog tree\", target.dialogs[target.initialDialog]);\r\n            setCurrentDialog(target.dialogs[target.initialDialog]);\r\n        }\r\n    }, [target]);\r\n\r\n    useEffect(() => {\r\n        const steps = currentDialog?.steps;\r\n        if (steps) {\r\n            console.log(\"Update current step to first dialog step\");\r\n            setCurrentStep(steps[0]);\r\n        }\r\n    }, [currentDialog]);\r\n\r\n    useEffect(() => {\r\n        if (currentStep) {\r\n            setOptions(currentStep.options || []);\r\n\r\n            const waitingForOption = currentStep.options != null;\r\n            const nextStep = getNextStep(currentDialog, currentStep);\r\n\r\n            setShowNextIcon(nextStep !== null);\r\n\r\n            if (!waitingForOption && !nextStep) {\r\n                console.log(\"Not waiting for option and no next step, wait and close\");\r\n                sleep(1000).then(() => onComplete(target));\r\n            }\r\n        }\r\n    }, [target, currentDialog, currentStep, onComplete]);\r\n\r\n    const getNextStep = (dialog: Dialog, currentStep: DialogStep): DialogStep | null => {\r\n        if (!dialog.steps) {\r\n            return null;\r\n        }\r\n        const currentStepIndex = dialog.steps.indexOf(currentStep);\r\n        if (currentStepIndex < 0 || currentStepIndex >= dialog.steps.length - 1) {\r\n            return null;\r\n        }\r\n        return dialog.steps[currentStepIndex + 1];\r\n    };\r\n\r\n    const moveForward = React.useCallback(() => {\r\n        if (!currentDialog || !currentStep) {\r\n            return;\r\n        }\r\n\r\n        const waitingForOption = currentStep.options != null;\r\n        const nextStep = getNextStep(currentDialog, currentStep);\r\n\r\n        console.log(\"Waiting for option?\", waitingForOption, \"Next step:\", nextStep);\r\n\r\n        if (!waitingForOption && nextStep) {\r\n            setCurrentStep(nextStep);\r\n        } else if (!waitingForOption && !nextStep) {\r\n            onComplete(target);\r\n        }\r\n    }, [currentDialog, currentStep, onComplete, target]);\r\n\r\n    useEffect(() => {\r\n        const handleKeyPress = (e: KeyboardEvent) => {\r\n            console.log(e);\r\n            moveForward();\r\n        };\r\n\r\n        window.addEventListener(\"keypress\", handleKeyPress);\r\n        return () => {\r\n            window.removeEventListener(\"keypress\", handleKeyPress);\r\n        };\r\n        // this gets recreated every time handlKeyPress changes :(\r\n    }, [currentStep, moveForward]);\r\n\r\n    const handleOptionSelected = (option: DialogOption) => {\r\n        console.log(\"Selected option:\", option);\r\n        if (option.next) {\r\n            setCurrentDialog(target.dialogs[option.next]);\r\n        } else {\r\n            onComplete(target);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Conversation style={conversationAnimation}>\r\n            <ConversationChoices>\r\n                {choiceAnimation.map((props, index) => (\r\n                    <ConversationChoice\r\n                        key={index}\r\n                        style={props}\r\n                        onClick={() => handleOptionSelected(options[index])}\r\n                    >\r\n                        {options[index].text}\r\n                    </ConversationChoice>\r\n                ))}\r\n            </ConversationChoices>\r\n\r\n            <Interlocutor style={interlocutorAnimation}>\r\n                <InterlocutorImageFrame>\r\n                    <CornerHighlights level=\"top\" side=\"left\" />\r\n                    <CornerHighlights level=\"top\" side=\"right\" />\r\n                    <CornerHighlights level=\"bottom\" side=\"left\" />\r\n                    <CornerHighlights level=\"bottom\" side=\"right\" />\r\n                    <InterlocutorImage src={getAsset(target.portraitImage)} alt=\"\" />\r\n                    <InterlocutorNameTag>{target.name}</InterlocutorNameTag>\r\n                </InterlocutorImageFrame>\r\n\r\n                <InterlocutorText onClick={(e) => moveForward()}>\r\n                    <CornerHighlights level=\"top\" side=\"left\" only=\"horizontal\" />\r\n                    <CornerHighlights level=\"top\" side=\"right\" />\r\n                    <CornerHighlights level=\"bottom\" side=\"left\" only=\"horizontal\" />\r\n                    <CornerHighlights level=\"bottom\" side=\"right\" />\r\n\r\n                    <Typist\r\n                        key={currentStep?.text} // probably need a better key\r\n                        avgTypingDelay={10}\r\n                        stdTypingDelay={10}\r\n                        startDelay={200}\r\n                        cursor={{ show: false }}\r\n                    >\r\n                        {currentStep?.text}\r\n                    </Typist>\r\n\r\n                    {showNextIcon && <NextStepIcon style={nextStepIconAnimation} />}\r\n                </InterlocutorText>\r\n            </Interlocutor>\r\n        </Conversation>\r\n    );\r\n};\r\n\r\nexport default DialogWindow;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport { Icon } from \"@blueprintjs/core\";\r\n\r\nimport { Navbar, PageTitle } from \"modules/shared\";\r\nimport { getAsset } from \"../../assets\";\r\nimport { Character } from \"../../models/Dialog\";\r\nimport { DialogWindow } from \"../DialogWindow/DialogWindow\";\r\n\r\nconst visibleCharacters: Character[] = [getAsset(\"characters.json\")[\"cat_mcmeow\"]];\r\n\r\nconst Page = styled.div`\r\n    padding: 10px;\r\n    position: relative;\r\n    height: calc(100vh - 50px);\r\n    overflow: hidden;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1;\r\n`;\r\n\r\ntype BackgroundProps = { focused: boolean };\r\nconst Background = styled.div`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 0;\r\n    background-image: url(${getAsset(\"images/grass.png\")});\r\n    background-repeat: repeat;\r\n    background-size: 64px 64px;\r\n    filter: blur(${(props: BackgroundProps) => (props.focused ? 1 : 0)});\r\n    transition: filter 0.6s ease-in-out;\r\n`;\r\n\r\ntype CharacterEntityProps = { active: boolean };\r\nconst CharacterEntity = styled.div`\r\n    position: relative;\r\n    z-index: 1;\r\n\r\n    img {\r\n        height: 150px;\r\n        transition: filter 0.2s ease;\r\n\r\n        :hover {\r\n            cursor: pointer;\r\n            filter: drop-shadow(0px 0px 1px #00ff00) drop-shadow(0px 0px 1px #00ff00)\r\n                drop-shadow(0px 0px 1px #00ff00);\r\n        }\r\n\r\n        ${(props: CharacterEntityProps) =>\r\n            props.active\r\n                ? `\r\n                filter: \r\n                    drop-shadow(0px 0px 1px #00ff00) \r\n                    drop-shadow(0px 0px 1px #00ff00)\r\n                    drop-shadow(0px 0px 1px #00ff00);\r\n            `\r\n                : \"\"}\r\n    }\r\n`;\r\n\r\ntype BackbarProps = { pos: \"top\" | \"bottom\" };\r\nconst AnimatedBlackBar = styled(animated.div)`\r\n    position: absolute;\r\n    z-index: 5;\r\n    left: 0;\r\n    right: 0;\r\n    background: black;\r\n    ${(props: BackbarProps) => (props.pos ? `${props.pos}: 0;` : \"\")}\r\n`;\r\n\r\nconst QuestIcon = styled(Icon).attrs({\r\n    icon: \"error\",\r\n    iconSize: 40,\r\n})`\r\n    @keyframes floaty {\r\n        0% {\r\n            transform: translate(-50%, -10px);\r\n        }\r\n        50% {\r\n            transform: translate(-50%, -20px);\r\n        }\r\n        100% {\r\n            transform: translate(-50%, -10px);\r\n        }\r\n    }\r\n\r\n    color: #ffdd37;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 0;\r\n    transform: translate(-50%, -20px);\r\n    z-index: 5;\r\n    filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.3));\r\n    animation: 1s floaty ease infinite;\r\n\r\n    :hover {\r\n        cursor: pointer;\r\n    }\r\n`;\r\n\r\nexport const DialogViewerPage: React.FC = () => {\r\n    const [target, setTarget] = useState<Character | null>(null);\r\n\r\n    const blackBarProps = useSpring({\r\n        height: target ? \"15%\" : \"0%\",\r\n        opacity: target ? 1 : 0,\r\n    });\r\n\r\n    return (\r\n        <Page>\r\n            <PageTitle title=\"Dialog Viewer\" />\r\n            <Navbar />\r\n            <Background focused={target != null} />\r\n            <AnimatedBlackBar pos=\"top\" style={blackBarProps} />\r\n            <AnimatedBlackBar pos=\"bottom\" style={blackBarProps} />\r\n\r\n            {visibleCharacters.map((character: Character, index) => (\r\n                <div style={{ position: \"relative\" }} key={index}>\r\n                    <QuestIcon onClick={() => setTarget(character)} />\r\n                    <CharacterEntity key={index} active={target === character}>\r\n                        <img\r\n                            src={getAsset(character.worldImage)}\r\n                            alt={character.name}\r\n                            onClick={() => setTarget(character)}\r\n                        />\r\n                    </CharacterEntity>\r\n                </div>\r\n            ))}\r\n\r\n            {target && (\r\n                <DialogWindow\r\n                    target={target}\r\n                    onComplete={(target: Character) => {\r\n                        console.log(\"dialog is over\");\r\n                        setTarget(null);\r\n                    }}\r\n                />\r\n            )}\r\n        </Page>\r\n    );\r\n};\r\n\r\nexport default DialogViewerPage;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nimport { AccessControl, AccessLevel } from \"modules/auth\";\r\nimport DialogViewerPage from \"./components/DialogViewerPage/DialogViewerPage\";\r\n\r\nconst routes = [\r\n    <Route key=\"dialogs-viewer-page\" exact path=\"/dialog-viewer\">\r\n        <AccessControl accessLevel={AccessLevel.LoggedIn} redirectTo=\"/login\">\r\n            <DialogViewerPage />\r\n        </AccessControl>\r\n    </Route>\r\n];\r\n\r\nexport { routes };\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Redirect, Switch, Route } from \"react-router-dom\";\nimport \"normalize.css/normalize.css\";\nimport \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\n\nimport { routes as authRoutes, SessionStore } from \"modules/auth\";\nimport { routes as homeRoutes } from \"modules/home\";\nimport { routes as profileRoutes } from \"modules/profile\";\nimport { routes as dialogSystemRoutes } from \"modules/dialog-system\";\n\nimport \"./App.scss\";\n\nexport const App: React.FC = () => {\n    React.useEffect(() => {\n        SessionStore.restoreSession();\n    }, []);\n\n    return (\n        <Router>\n            <Switch>\n                {authRoutes}\n                {homeRoutes}\n                {profileRoutes}\n                {dialogSystemRoutes}\n                <Route>\n                    <Redirect to=\"/\" />\n                </Route>\n            </Switch>\n        </Router>\n    );\n};\n\nexport default App;\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Navbar as BPNavbar, NavbarGroup, NavbarHeading, NavbarDivider, Button } from \"@blueprintjs/core\";\r\n\r\nimport { SessionStore } from \"modules/auth\";\r\n\r\nexport const Navbar: React.FC = () => {\r\n    console.log(\"Navbar!!\");\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <BPNavbar className=\"bp3-dark\" fixedToTop={true}>\r\n            <NavbarGroup align=\"left\">\r\n                <NavbarHeading>Super App</NavbarHeading>\r\n            </NavbarGroup>\r\n\r\n            <NavbarGroup align=\"right\">\r\n                <Button\r\n                    icon=\"home\"\r\n                    minimal\r\n                    onClick={() => {\r\n                        history.push(\"/\");\r\n                    }}\r\n                ></Button>\r\n                \r\n                <NavbarDivider />\r\n\r\n                <Button\r\n                    icon=\"chat\"\r\n                    minimal\r\n                    onClick={() => {\r\n                        history.push(\"/dialog-viewer\");\r\n                    }}\r\n                ></Button>\r\n\r\n                <NavbarDivider />\r\n\r\n                <Button\r\n                    icon=\"user\"\r\n                    minimal\r\n                    onClick={() => {\r\n                        history.push(\"/profile\");\r\n                    }}\r\n                ></Button>\r\n\r\n                <NavbarDivider />\r\n\r\n                <Button\r\n                    rightIcon=\"power\"\r\n                    minimal\r\n                    onClick={() => {\r\n                        SessionStore.logout();\r\n                    }}\r\n                >\r\n                    Logout\r\n                </Button>\r\n            </NavbarGroup>\r\n        </BPNavbar>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { useEffect } from \"react\";\r\n\r\nexport type IPageTitleProps = {\r\n    title: string;\r\n};\r\n\r\nexport const PageTitle: React.FC<IPageTitleProps> = ({ title }) => {\r\n    useEffect(() => {\r\n        document.title = `${title} Â· My Cool App`;\r\n    }, [title]);\r\n\r\n    return null;\r\n};\r\n\r\nexport default PageTitle;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { App } from \"modules/shared\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","module.exports = __webpack_public_path__ + \"static/media/grass.fe1180da.png\";","module.exports = __webpack_public_path__ + \"static/media/portrait.9d937c2c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/char.57f4cfcd.webp\";"],"sourceRoot":""}